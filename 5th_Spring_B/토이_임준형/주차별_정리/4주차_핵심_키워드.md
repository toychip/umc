# 4μ£Όμ°¨ ν•µμ‹¬ ν‚¤μ›λ“

## κΈ°λ³Έν‚¤

### μ •μ

κΈ°λ³Έν‚¤λ” ν…μ΄λΈ”μ—μ„ **κ° ν–‰μ„ κ³ μ ν•κ² μ‹λ³„**ν•  μ μλ” ν•λ‚ λλ” μ—¬λ¬ κ°μ ν•„λ“λ΅ κµ¬μ„±(λ³µν•©ν‚¤ μΌ μ μμ)λλ‹¤. κΈ°λ³Έν‚¤λ” **NULL** κ°’μ„ ν—μ©ν•μ§€ μ•μΌλ©°, ν…μ΄λΈ” λ‚΄μ—μ„ κ°’μ΄ μ¤‘λ³µλ  μ μ—†λ‹¤.

π’΅  κΈ°λ³Έν‚¤λ” ν…μ΄λΈ”μ λ¬΄κ²°μ„±μ„ λ³΄μ¥ν•λ” λ° μ¤‘μ”ν• μ—­ν• μ„ ν•λ‹¤.

---

#### μ‚¬μ©λ°©λ²•: κΈ°λ³Έν‚¤λ¥Ό μ„ μ–Έν•λ” λ°©λ²•μ€ DBMSλ‚ μ‚¬μ©ν•λ” ν”„λ μ„μ›ν¬μ— λ”°λΌ λ‹¤λ¥΄λ‹¤.

- **`SQL`μ—μ„ κΈ°λ³Έν‚¤ μ„ μ–Έ λ°©λ²•**

    ```sql
    CREATE TABLE Member (
        id INT PRIMARY KEY,
        name VARCHAR(100),
        age INT
    );
    ```

- `Spring JPA`μ—μ„ μ‚¬μ© λ°©λ²•

  λ°‘μ¤„ μΉ λ¶€λ¶„ μ¤‘ @Idκ°€ Long idλ¥Ό κΈ°λ³Έν‚¤λ΅ μ„ μ–Έν•λ‹¤λ” λ»μ΄λ©°, JPA κΈ°λ³Έ μ „λµμ€ κΈ°λ³Έν‚¤ μ»¬λΌ μ΄λ¦„μ„ λ”°λ΅ μ •ν•΄μ£Όμ§€ μ•μΌλ©΄, **μ—”ν‹°ν‹°λ… + β€_β€™ + id**κ°€ κΈ°λ³Έν‚¤κ°€ λλ‹¤.  @GeneratedValueλ” μλ™μΌλ΅ 1μ”© μ¶”κ°€ν•΄μ¤€λ‹¤λ” λ»μ΄λ©° DB μΆ…λ¥λ§λ‹¤ strategy μ„¤μ •μ΄ λ‹¬λΌμ§„λ‹¤.

    ```java
    @Entity
    public class Member {
        @Id                   // dbμ— λ”°λΌ strategy μ„¤μ •μ΄ λ‹¤λ¦„
        @GeneratedValue(strategy = GenerationType.IDENTITY)
    		private Long id;
        private String name;
        private int age;
    }
    ```

## μ™Έλν‚¤

### **μ •μ**

`μ™Έλν‚¤(Foreign Key, FK)`λ” ν•λ‚μ ν…μ΄λΈ”μ΄ λ‹¤λ¥Έ ν…μ΄λΈ”μ `κΈ°λ³Έ ν‚¤(Primary Key, PK)λ¥Ό μ°Έμ΅°`ν•λ” ν•„λ“λ¥Ό λ§ν•λ‹¤. μ™Έλν‚¤λ¥Ό μ‚¬μ©ν•λ©΄ λ°μ΄ν„°μ λ¬΄κ²°μ„±μ„ μ μ§€ν•κ³ , ν…μ΄λΈ” κ°„μ κ΄€κ³„λ¥Ό κµ¬μ„±ν•  μ μλ‹¤.

β μ™Έλν‚¤μ— λ€ν•΄ μ΄ν•΄ν•λ ¤λ©΄ κΈ°λ³Έμ μΌλ΅ DBμ—μ„ 1:N κ΄€κ³„μΌ λ• 1μ½μ— FKλ¥Ό κ°–λ” κ²ƒμ„ μΈμ§€ν•΄μ•Όν•λ‹¤!

---

#### μμ‹

Member μ™€ Teamμ΄ μλ‹¤λ©΄, μ–΄λ– ν• Memberκ°€ λ¬΄μ¨ Team μΈμ§€ μ•μ•„μ•Όν•κΈ° λ•λ¬Έμ΄λ‹¤.

κ·Έλ ‡κΈ° λ•λ¬Έμ— Teamμ pkλ¥Ό Memberκ°€ FK(μ™Έλν‚¤)λ΅ κ°–λ”λ‹¤λ©΄ νΉμ • Memberμ Teamμ΄ μ–΄λ”μ§€ μ• μ μμ„ κ²ƒμ΄λ‹¤.

---

**μ‚¬μ© λ°©λ²•**: λ°μ΄ν„°λ² μ΄μ¤ κ΄€λ¦¬ μ‹μ¤ν…(DBMS)μ—μ„ μ™Έλν‚¤λ¥Ό μ„ μ–Έν•λ” λ°©λ²•μ€ λ‹¤μ–‘ν•λ‹¤.

- `SQL`μ—μ„ μ™Έλν‚¤ μ„ μ–Έ λ°©λ²•

    ```sql
    CREATE TABLE Member (
        id INT PRIMARY KEY,
        team_id INT,
        FOREIGN KEY (team_id) REFERENCES Team(id)
    );
    ```

- `Spring JPA`μ—μ„ μ‚¬μ© λ°©λ²•

  λ°‘μ¤„ μΉ λ¶€λ¶„μ΄ Teamμ κΈ°λ³Έ ν‚¤μΈ team_idλ¥Ό FKλ΅ κ°–λ”λ‹¤λ” μλ―Έμ΄λ‹¤.

    ```java
    @Entity
    public class Member {
        @Id                     // dbμ— λ”°λΌ strategy μ„¤μ •μ΄ λ‹¤λ¦„
        @GeneratedValue(strategy = GenerationType.IDENTITY) 
        private Long id;
    
        @ManyToOne
        @JoinColumn(name = "team_id")
        private Team team;
    }
    ```

## λ³µν•© ν‚¤

### **μ •μ**

λ³µν•©ν‚¤λ” `**λ‘ κ° μ΄μƒμ ν•„λ“λ΅ κµ¬μ„±λλ” κΈ°λ³Έν‚¤**`λ¥Ό μλ―Έν•λ‹¤. κ°κ°μ ν•„λ“λ” λ‹¨λ…μΌλ΅λ” ν–‰μ„ κ³ μ ν•κ² μ‹λ³„ν•  μ μ—†μ§€λ§, ν•©μ³μ§„ λ³µν•©ν‚¤λ” ν…μ΄λΈ” λ‚΄μ—μ„ κ³ μ ν• κ°’μ„ κ°€μ§€κ² λλ‹¤. λ³µν•©ν‚¤λ„ **NULL κ°’μ„ ν—μ©ν•μ§€ μ•μΌλ©°**, ν…μ΄λΈ” λ‚΄μ—μ„ κ°’μ μ¤‘λ³µμ΄ μ—†μ–΄μ•Ό ν•λ‹¤.

π‘‰ λ³µν•©ν‚¤λ” μ—¬λ¬ κ°μ μ†μ„±μ„ λ¬¶μ–΄ ν•λ‚μ ν‚¤λ΅ μ‚¬μ©ν•λ‹¤. μ΄λ” ν…μ΄λΈ”μ λ¬΄κ²°μ„±μ„ λ³΄μ¥ν•λ” λ° λ„μ›€μ„ μ¤€λ‹¤.

---

#### **μμ‹**

**`Order`** ν…μ΄λΈ”μ—μ„ μ£Όλ¬Έ λ²νΈ(**`orderId`**)μ™€ μƒν’ μ½”λ“(**`productCode`**)λ¥Ό ν•©μ³μ„ λ³µν•©ν‚¤λ΅ μ‚¬μ©ν•  μ μλ‹¤. μ΄λ ‡κ² ν•λ©΄, κ°™μ€ μ£Όλ¬Έ λ²νΈ λ‚΄μ—μ„λ„ λ‹¤λ¥Έ μƒν’ μ½”λ“λ¥Ό κ°€μ§ μ μκ² λλ‹¤.

---

#### μ‚¬μ©λ°©λ²•

- SQLμ—μ„ λ³µν•©ν‚¤ μ‚¬μ© λ°©λ²•

    ```sql
    CREATE TABLE Order (
        orderId INT,
        productCode INT,
        PRIMARY KEY (orderId, productCode)
    );
    ```


- JPAμ—μ„ λ³µν•©ν‚¤ μ‚¬μ© λ°©λ²•

  κΈ°λ³Έν‚¤μ™€ μ™Έλν‚¤μ— λΉ„ν•΄, JPAμ—μ„ λ³µν•©ν‚¤ μ‚¬μ©μ€ λΉ„κµμ  λ³µμ΅ν•λ‹¤. μ½”λ“λ¥Ό λ³΄μ.

    ```java
    @Entity
    @EqualsAndHashCode
    public class Order {
        @EmbeddedId
        private OrderPK id;
    }
    ```

    ```java
    @Embeddable
    public class OrderPK implements Serializable {
        private Long orderId;
        private Long productCode;
    }
    ```

  1. `@Embeddable`μ„ μ•μ•„μ•Όν•λ‹¤. JAVAμ λ‹¤ν•μ„±μ„ ν™μ©ν•  μ μκ²ν•λ” μ• λ…Έν…μ΄μ…μΌλ΅, λ‘κ°μ ν•„λ“λ¥Ό κ°–λ” OrderPk ν΄λμ¤λ¥Ό Order ν΄λμ¤μ—μ„ κ·Έλ€λ΅ μ‚¬μ©ν•  μ μλ‹¤.
  2. λ³µν•©ν‚¤λ¥Ό μ‚¬μ©ν•  λ•, λ³µν•©ν‚¤ ν΄λμ¤(`OrderPK`μ™€ κ°™μ€)λ” **`Serializable`** μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•΄μ•Ό ν•λ‹¤. μ΄λ” JPAκ°€ λ³µν•©ν‚¤λ¥Ό κµ¬μ„±ν•λ” ν•„λ“λ¥Ό ν¨μ¨μ μΌλ΅ κ΄€λ¦¬ν•κ³ , λ³µν•©ν‚¤ μΈμ¤ν„΄μ¤λ¥Ό λ‹¤λ£° μ μκ² ν•΄μ¤€λ‹¤.
  3. **`Serializable`** μΈν„°νμ΄μ¤λ” λ©”μ„λ“λ¥Ό μ •μν•μ§€ μ•λ” λ§μ»¤ μΈν„°νμ΄μ¤(Marker Interface)λ‹¤. μ΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•¨μΌλ΅μ¨, ν•΄λ‹Ή ν΄λμ¤μ μΈμ¤ν„΄μ¤κ°€ μ§λ ¬ν™”κ°€ κ°€λ¥ν•¨μ„ JVMμ—κ² μ•λ ¤μ£Όλ” μ—­ν• μ„ ν•λ‹¤.

## μ—°κ΄€κ΄€κ³„

### μ •μ

β™»οΈ `μ—°κ΄€κ΄€κ³„`λ” λ‘ ν…μ΄λΈ” μ‚¬μ΄μ κ΄€κ³„λ¥Ό **κ°μ²΄ μ§€ν–¥μ μΌλ΅ λ§¤ν•‘**ν• κ²ƒμ„ μλ―Έν•λ‹¤. μ΄λ” λ°μ΄ν„°λ² μ΄μ¤μ μ™Έλν‚¤μ™€λ” λ³„κ°λ΅, κ°μ²΄ κ°„μ μ°Έμ΅°λ¥Ό ν†µν•΄ μ΄λ£¨μ–΄μ§„λ‹¤. μ—°κ΄€κ΄€κ³„λ¥Ό ν†µν•΄ κ°μ²΄λ” λ‹¤λ¥Έ κ°μ²΄λ¥Ό μ°Έμ΅°ν•  μ μμΌλ©°, μ΄λ¥Ό ν†µν•΄ κ°μ²΄ κ°„μ ν‘λ ¥μ΄ μ΄λ£¨μ–΄μ§„λ‹¤.

μ‚¬μ© λ°©λ²•μ— λ€ν•΄μ„  μ‚¬μ‹¤ μ΄λ―Έ λ‹¤λ¤λ‹¤. μ™Έλν‚¤ μ„¤λ… λ¶€λ¶„μ— SQLκ³Ό JPA λ°©λ²• λ‘ λ‹¤ μ™Έλν‚¤λ¥Ό μ„¤λ…ν•λ” κ²ƒμ΄μ λ™μ‹μ— μ—°κ΄€κ΄€κ³„ λν• μ„¤λ…ν•λ” κ²ƒμ΄λ‹¤.

## ER λ‹¤μ΄μ–΄κ·Έλ¨

ER λ‹¤μ΄μ–΄κ·Έλ¨μ€ "Entity-Relationship Diagram"μ μ•½μλ΅, λ°μ΄ν„°λ² μ΄μ¤μ κµ¬μ΅°μ™€ κ·Έ μ•μ λ°μ΄ν„°μ κ΄€κ³„λ¥Ό `μ‹κ°μ μΌλ΅ ν‘ν„ν•λ” λ‹¤μ΄μ–΄κ·Έλ¨`μ΄λ‹¤. μ΄ λ‹¤μ΄μ–΄κ·Έλ¨μ€ μ£Όλ΅ λ°μ΄ν„°λ² μ΄μ¤ μ„¤κ³„μ—μ„ ν™μ©λλ‹¤.

- **Entity(μ—”ν„°ν‹°)**: λ°μ΄ν„°λ² μ΄μ¤μ—μ„ ν‘ν„ν•λ ¤λ” 'κ°μ²΄'λ‚ 'μ •λ³΄'μ λ‹¨μ„μ΄λ‹¤. μλ¥Ό λ“¤μ–΄, "μ‚¬λ", "νμ‚¬", "μƒν’" λ“±μ΄ λ  μ μλ‹¤.
- **Attribute(μ†μ„±)**: μ—”ν„°ν‹°λ¥Ό κµ¬μ„±ν•λ” μ„Έλ¶€ μ •λ³΄μ΄λ‹¤. μλ¥Ό λ“¤μ–΄ "μ‚¬λ" μ—”ν„°ν‹°μ κ²½μ° "μ΄λ¦„", "λ‚μ΄", "μ£Όμ†" λ“±μ΄ μ†μ„±μ΄ λ  μ μλ‹¤.
- **Relationship(κ΄€κ³„)**: λ‘ μ—”ν„°ν‹° κ°„μ κ΄€κ³„λ¥Ό λ‚νƒ€λ‚Έλ‹¤. μλ¥Ό λ“¤μ–΄, "μ‚¬λ"κ³Ό "νμ‚¬"λΌλ” λ‘ μ—”ν„°ν‹°κ°€ μλ‹¤λ©΄, "μ‚¬λ"μ€ "νμ‚¬"μ—μ„ "κ·Όλ¬΄ν•λ‹¤"λΌλ” κ΄€κ³„λ¥Ό κ°€μ§ μ μλ‹¤.

## μ •κ·ν™”

μ •κ·ν™”λ” `λ°μ΄ν„°λ² μ΄μ¤μ μ„¤κ³„λ¥Ό λ” ν¨μ¨μ μΌλ΅ λ§λ“¤κΈ° μ„ν• κ³Όμ •`μ΄λ‹¤. μ΄ κ³Όμ •μ—μ„λ” λ°μ΄ν„°μ μ¤‘λ³µμ„ μµμ†ν™”ν•κ³ , λ°μ΄ν„°μ κµ¬μ΅°λ¥Ό κΉ”λ”ν•κ² μ •λ¦¬ν•λ‹¤. μλ¥Ό λ“¤μ–΄, μ—¬λ¬ ν…μ΄λΈ”μ—μ„ κ°™μ€ μ •λ³΄κ°€ λ°λ³µλλ” κ²½μ°, μ΄ μ •λ³΄λ¥Ό ν•λ‚μ ν…μ΄λΈ”λ΅ λ§λ“¤κ³  λ‹¤λ¥Έ ν…μ΄λΈ”μ—μ„λ” μ°Έμ΅°ν•λ” λ°©μ‹μΌλ΅ μ¤‘λ³µμ„ μ κ±°ν•λ‹¤.

#### μ¥μ 

- λ°μ΄ν„°μ λ¬΄κ²°μ„±μ„ μ μ§€ν•κΈ° μ‰¬μ›μ§„λ‹¤.
- λ°μ΄ν„°μ μ¤‘λ³µμ„ μ¤„μΌ μ μλ‹¤.
- μ—…λ°μ΄νΈ, μ‚­μ , μ‚½μ… μ‘μ—…μ΄ λ” κ°„νΈν•΄μ§„λ‹¤.

#### λ‹¨μ 

- μ΅°μΈ μ—°μ‚°μ΄ λ§μ•„μ Έμ„ μΏΌλ¦¬μ μ„±λ¥μ΄ λ–¨μ–΄μ§ μ μλ‹¤.
- μ„¤κ³„κ°€ λ³µμ΅ν•΄μ§ μ μλ‹¤.

## λ° μ •κ·ν™”

λ°μ •κ·ν™”λ” μ •κ·ν™”μ `λ°λ€ κ³Όμ •`μ΄λ‹¤. μ¦‰, λ°μ΄ν„°μ μ¤‘λ³µμ„ ν—μ©ν•κ±°λ‚ ν…μ΄λΈ”μ„ ν•©μΉλ” λ“±μ μ‘μ—…μ„ ν†µν•΄ `λ°μ΄ν„°λ² μ΄μ¤μ μ„±λ¥`μ„ λ†’μ΄λ ¤κ³  ν•λ” κ²ƒμ΄λ‹¤. μ΄λ ‡κ² ν•λ©΄ λ°μ΄ν„°μ μ΅°ν μ†λ„κ°€ λΉ¨λΌμ§€λ” κ²½μ°κ°€ λ§λ‹¤.

#### μ¥μ 

- μΏΌλ¦¬ μ„±λ¥μ΄ λΉ¨λΌμ§ μ μλ‹¤.
- λ°μ΄ν„° μ΅°νκ°€ κ°„νΈν•΄μ§„λ‹¤.

#### λ‹¨μ 

- λ°μ΄ν„°μ λ¬΄κ²°μ„± μ μ§€κ°€ μ–΄λ ¤μ›μ§ μ μλ‹¤.
- λ°μ΄ν„° μ¤‘λ³µμΌλ΅ μΈν• μ €μ¥ κ³µκ°„μ λ‚­λΉ„κ°€ μƒκΈΈ μ μλ‹¤.
